### Стратегии
- AT MOST ONCE - стратегия используется для быстрой передачи сообщений, если нам неважна гарантия доставки данных. Сервис производитель асинхронно отправляет запрос и не ждет ответа от кафки, данные не сохраняются на жесткий диск.
- AT LEAST ONE - если нам важна гарантия доставки данных. Сервис синхронно ожидает ответа от кафки, о том что данные были получены и сохранены на жесткий диск. Это может вызвать дубликацию данных, если ответ кафки не дошел до производителя, но дынные уже были получены и сохранены на жестком диске, производитель отправит повторный запрос с теми же данными. Нам необходимо обеспечивать идемпотентность на стороне потребителя, если мы работаем с платежами. Для обеспечения отказоустойчивости используются минимум три сервера с кафкой.
### Потоковая передача данных
- Определенные типы данных распределяются по разным топикам. Топики состоят из разных частей (partitions), чтобы из этих очередей можно было получать дынные параллельно, что обеспечивает высокую пропускную способность.
- Можно вынести очереди одного топика на другой сервер, что увеличит пропускную способность, так как мы увеличили количество мощностных ресурсов. При этом части (partitions), которые не используются для передачи данных, все равно сохраняются на жестком диске. Если один из серверов ляжет, то спящие partitions начнут обработку данных.
- Данные из partitions читаются в случайном порядке. Если нам важна последовательность дынных, то мы можем им дать одинаковый ключ, тогда они будут записываться в один и тот же partition.

![[kafka.png]]
