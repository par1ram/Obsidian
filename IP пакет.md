IP пакет состоит из трех заголовков и данных. Он включает в себя транспортный заголовок, IP заголовок, Ethernet заголовок.![[IP пакет.png]]

Ethernet заголовок 
- `MACD` мак адрес назначения
- `MACS` мак адрес отправителя
- `ProtN` номер протокола межсетевого уровня (в простом ip пакете 0800)
IP заголовок
- `IphL` версия IP (v4, v6) и длина IP заголовка деленная на 4
- `TOS` тип сервиса, рекомендация по обработке IP пакета (важность, скорость, надежность)
- `Len` длина IP адреса с начала IP заголовка и до конца данных
- `Idp` идентификатор пакета
- `f` Один бит указывает на то, нужно ли фрагментировать пакет. Один бит установлен в единицу, если пакет не последний.
- `Offset` смещение пакета, используется для фрагментации данных, если пакет полностью влезает в возможности сети то поле равно 0
- `TTL` число скачков по роутерам, через которое пакет будет уничтожен
- `ProtT` транспортный протокол
- `KS` Контрольная сумма, позволяет проверять данные на целостность. Мы суммируем всю длину IP пакета и инвертируем её. При проверке мы также суммируем всю длину и складываем с контрольной суммой, если получаем (0xFFFF - 65535), то данные не повреждены.
- `IpS` ip отправителя
- `IpD` ip получателя

`MTU` максимальное количество байт, которое может передать IP пакет.
### Фрагментация
При фрагментации пакета на несколько разных пакетов, у них будет одинаковый идентификатор IdP.
В поле Offset записывается количество байт через, которое необходимо вставить нарезанный пакет. Это число делится на 8, чтобы поместиться в 13 бит.